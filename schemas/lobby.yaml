$schema: "http://json-schema.org/draft‑wright‑json‑schema‑00/schema#"
$id: "https://github.com/tanndev/silence-among-us/blob/main/schemas/lobby.yaml"
Lobby:
  type: object
  description: |
    Information about a single Discord channel being tracked as a game, along with game-state information for
    automatically muting/unmuting players.

    A lobby is built around a single Discord voice channel, and assumes that anyone joining that channel is
    playing that game. So the `channelId` is also used as a lobby id.
  required: [channelId, state, players, discord]
  additionalProperties: false
  properties:
    channelId:
      type: string
      description: The id of the Discord voice channel being used for the game.
    state:
      type: string
      description: |
        The current state of the lobby, as one of the following values:
        - `intermission`: Between games
          - Everyone can talk.
          - New players join as `living`.
        - `working`: In game, while the crew are performing tasks
          - Players with `status:living` are muted and deafened.
          - Players with `status:dead` are unmuted and can talk to each other.
          - Other players are muted/unmuted according to settings.
          - New players join as `waiting`.
        - `meeting`: In game, during a meeting
          - Players with `status:living` can talk.
          - Players with `status:dead` are muted.
          - Other players are muted/unmuted according to settings.
      enum: [intermission, working, meeting]
    players:
      type: array
      description: List of all players currently (or recently) in the channel.
      items:
        $ref: "player.yaml#/Player"
    roomCode:
      type: string
      description: (Optional) The room code of the game, for players to join.
    roomRegion:
      type: string
      description: (Optional) The region where the game is hosted.